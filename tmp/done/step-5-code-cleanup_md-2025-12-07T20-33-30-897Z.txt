<github_issue>
**URL:** https://github.com/ziyaaktas/tab-limiter/issues/4

**Title:** Code Cleanup: Remove Dead Code, Standardize Patterns, and Improve Error Handling

**Body:**

## Summary

Refactor codebase to remove dead code, standardize on async/await patterns, improve error handling, and enhance overall code quality throughout the extension.

## Background

As part of the ongoing MV3 migration effort (following issues #1, #2, #3), this issue addresses technical debt and code quality improvements needed to ensure maintainability and reliability.

**Current State Analysis:**
- `background.js`: Mixed promise chains and callback patterns, commented-out dead code, inconsistent error handling
- `options.js`: Outdated date checks, duplicated helper functions, browser compatibility shim
- Magic numbers and strings scattered throughout
- No structured error handling for async operations

## Tasks

### 1. Remove Dead Code

- [ ] Remove commented-out `annotateOptionsWithTabInfo` function block (background.js lines 35-50)
- [ ] Remove debug console.log statements that are commented out
- [ ] Remove outdated date-based message logic in options.js (line 112: `new Date('09-20-2020')`)
- [ ] Audit for unused variables and remove them

### 2. Standardize Async Patterns

Convert all promise chains to async/await for consistency and readability.

Functions to convert:
- [ ] `tabQuery`
- [ ] `windowRemaining`
- [ ] `totalRemaining`
- [ ] `updateBadge`
- [ ] `detectTooManyTabsInWindow`
- [ ] `detectTooManyTabsInTotal`
- [ ] `getOptions`
- [ ] `displayAlert`
- [ ] `updateTabCount`
- [ ] `handleTabCreated`

### 3. Add Error Handling

- [ ] Add try/catch to all async event handlers
- [ ] Add try/catch to storage operations in options.js
- [ ] Log errors with consistent prefix for debugging

### 4. Extract Magic Numbers/Strings

- [ ] Extract default options to named constant
- [ ] Extract minimum tab limit constant
- [ ] Extract initial state values to constants

### 5. Improve Code Organization

Reorganize files with clear section comments.

### 6. Address Browser Compatibility Shim

**Decision Required:** The line `const browser = chrome || browser` exists in both files.

Recommendation: Remove since MV3 migration is Chrome-focused.

### 7. Improve Alert Mechanism (Optional Enhancement)

Consider replacing blocking `alert()` with badge indicator or Chrome notifications.

### 8. Consistent Naming Conventions

- [ ] Rename `$inputs` to `inputElements` (remove jQuery-style prefix)
- [ ] Ensure all event handlers follow `handle{Event}` pattern

## Acceptance Criteria

- [ ] All commented-out code removed
- [ ] Consistent async/await pattern throughout both files
- [ ] try/catch error handling in all async functions
- [ ] Magic numbers/strings replaced with named constants
- [ ] Functions organized into logical sections with comments
- [ ] Unused variables removed
- [ ] Consistent naming conventions applied
- [ ] Extension still functions correctly
- [ ] No console errors in normal operation

## Technical Notes

### Service Worker Considerations
Per Chrome MV3 documentation, event listeners must be registered synchronously at the top level.

### Error Handling Best Practices
Use try/catch for localized error handling in event handlers to prevent unhandled promise rejections.

## Dependencies

- Issue #3 (Service Worker Lifecycle) should be completed first

## Related Issues

- #1 - Convert background.js to MV3 Service Worker
- #2 - Update Chrome APIs: browserAction â†’ action
- #3 - Handle Service Worker Lifecycle: State Persistence

**Labels:** enhancement

**Project:** tab-limiter (moved to Todo status)
</github_issue>

Issue created successfully at https://github.com/ziyaaktas/tab-limiter/issues/4 and moved to the "Todo" lane in the tab-limiter project.
